"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var alert_service_1 = require("../alert-service/alert-service");
var AppServiceProvider = (function () {
    function AppServiceProvider() {
        this.header = { 'content-type': 'application/x-www-form-urlencoded' };
        this.alertService = alert_service_1.default;
    }
    AppServiceProvider.prototype.getPalformNumber = function () {
        return 4;
    };
    AppServiceProvider.prototype.getReqUrl = function (url) {
        if (url.indexOf('http://') == 0 || url.indexOf('https://') == 0) {
            return url;
        }
        return AppServiceProvider.BASE_DOMAIN_API + url;
    };
    AppServiceProvider.prototype.checkLogin = function () {
        var token = '';
        if (token != '') {
            return true;
        }
        else {
            return false;
        }
    };
    AppServiceProvider.prototype.getToken = function () {
        return '';
    };
    AppServiceProvider.prototype.gotoLogin = function () { };
    AppServiceProvider.prototype.push = function (url, json) {
        if (json === void 0) { json = {}; }
        url = this.getPageUrl(url, json);
        wx.navigateTo({
            url: url
        });
    };
    AppServiceProvider.prototype.pushTabs = function (url) {
        url = this.getPageUrl(url);
        wx.switchTab({
            url: url
        });
    };
    AppServiceProvider.prototype.pop = function (delta) {
        if (delta === void 0) { delta = 1; }
        wx.navigateBack({
            delta: delta
        });
    };
    AppServiceProvider.prototype.successHandler = function (res, callback) {
        if (res.data.code == 200) {
            callback && callback(res.data);
        }
        else {
            this.errorHandler(res);
        }
    };
    AppServiceProvider.prototype.errorHandler = function (res) {
        console.log(res);
        this.alertService.alert('网络开小差');
    };
    AppServiceProvider.prototype.getPageUrl = function (url, json) {
        if (json === void 0) { json = {}; }
        if (url.indexOf('../') === -1 && url.indexOf('?') === -1) {
            url = '../' + url + '/' + url;
        }
        var jsonKeys = Object.keys(json);
        if (jsonKeys.length === 0) {
            return url;
        }
        var urlParams = jsonKeys
            .map(function (key) {
            return encodeURIComponent(key) + '=' + encodeURIComponent(json[key]);
        })
            .join('&');
        if (url.indexOf('?') === -1) {
            url += '?' + urlParams;
        }
        else {
            url += '&' + urlParams;
        }
        return url;
    };
    AppServiceProvider.BASE_DOMAIN = 'https://www.yilabao.cn/';
    AppServiceProvider.BASE_API = 'api/';
    AppServiceProvider.BASE_DOMAIN_API = AppServiceProvider.BASE_DOMAIN + AppServiceProvider.BASE_API;
    return AppServiceProvider;
}());
exports.AppServiceProvider = AppServiceProvider;
exports.default = new AppServiceProvider();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLXNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhcHAtc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLGdFQUEwRDtBQUUxRDtJQUFBO1FBT1csV0FBTSxHQUFHLEVBQUUsY0FBYyxFQUFFLG1DQUFtQyxFQUFFLENBQUM7UUFFakUsaUJBQVksR0FBRyx1QkFBWSxDQUFDO0lBK0h2QyxDQUFDO0lBdEhVLDZDQUFnQixHQUF2QjtRQWFJLE9BQU8sQ0FBQyxDQUFDO0lBQ2IsQ0FBQztJQUVNLHNDQUFTLEdBQWhCLFVBQWlCLEdBQVc7UUFDeEIsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUM3RCxPQUFPLEdBQUcsQ0FBQztTQUNkO1FBQ0QsT0FBTyxrQkFBa0IsQ0FBQyxlQUFlLEdBQUcsR0FBRyxDQUFDO0lBQ3BELENBQUM7SUFLTSx1Q0FBVSxHQUFqQjtRQUNJLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNmLElBQUksS0FBSyxJQUFJLEVBQUUsRUFBRTtZQUNiLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7YUFBTTtZQUNILE9BQU8sS0FBSyxDQUFDO1NBQ2hCO0lBQ0wsQ0FBQztJQUtNLHFDQUFRLEdBQWY7UUFDSSxPQUFPLEVBQUUsQ0FBQztJQUNkLENBQUM7SUFLTSxzQ0FBUyxHQUFoQixjQUFvQixDQUFDO0lBS2QsaUNBQUksR0FBWCxVQUFZLEdBQVcsRUFBRSxJQUFjO1FBQWQscUJBQUEsRUFBQSxTQUFjO1FBQ25DLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUNqQyxFQUFFLENBQUMsVUFBVSxDQUFDO1lBQ1YsR0FBRyxFQUFFLEdBQUc7U0FDWCxDQUFDLENBQUM7SUFDUCxDQUFDO0lBTU0scUNBQVEsR0FBZixVQUFnQixHQUFXO1FBQ3ZCLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLEVBQUUsQ0FBQyxTQUFTLENBQUM7WUFDVCxHQUFHLEVBQUUsR0FBRztTQUNYLENBQUMsQ0FBQztJQUNQLENBQUM7SUFNTSxnQ0FBRyxHQUFWLFVBQVcsS0FBaUI7UUFBakIsc0JBQUEsRUFBQSxTQUFpQjtRQUN4QixFQUFFLENBQUMsWUFBWSxDQUFDO1lBQ1osS0FBSyxFQUFFLEtBQUs7U0FDZixDQUFDLENBQUM7SUFDUCxDQUFDO0lBS00sMkNBQWMsR0FBckIsVUFBc0IsR0FBUSxFQUFFLFFBQXlDO1FBQ3JFLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksR0FBRyxFQUFFO1lBQ3RCLFFBQVEsSUFBSSxRQUFRLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ2xDO2FBQU07WUFDSCxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQzFCO0lBQ0wsQ0FBQztJQUtNLHlDQUFZLEdBQW5CLFVBQW9CLEdBQVE7UUFDeEIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNqQixJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNyQyxDQUFDO0lBRU0sdUNBQVUsR0FBakIsVUFBa0IsR0FBVyxFQUFFLElBQWM7UUFBZCxxQkFBQSxFQUFBLFNBQWM7UUFDekMsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUU7WUFDdEQsR0FBRyxHQUFHLEtBQUssR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsQ0FBQztTQUNqQztRQUNELElBQUksUUFBUSxHQUFhLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsSUFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUN2QixPQUFPLEdBQUcsQ0FBQztTQUNkO1FBRUQsSUFBSSxTQUFTLEdBQUcsUUFBUTthQUNuQixHQUFHLENBQUMsVUFBUyxHQUFHO1lBQ2IsT0FBTyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDekUsQ0FBQyxDQUFDO2FBQ0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxHQUFHLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQ3pCLEdBQUcsSUFBSSxHQUFHLEdBQUcsU0FBUyxDQUFDO1NBQzFCO2FBQU07WUFDSCxHQUFHLElBQUksR0FBRyxHQUFHLFNBQVMsQ0FBQztTQUMxQjtRQUNELE9BQU8sR0FBRyxDQUFDO0lBQ2YsQ0FBQztJQXRJYSw4QkFBVyxHQUFXLHlCQUF5QixDQUFDO0lBQ2hELDJCQUFRLEdBQVcsTUFBTSxDQUFDO0lBQzFCLGtDQUFlLEdBQUcsa0JBQWtCLENBQUMsV0FBVyxHQUFHLGtCQUFrQixDQUFDLFFBQVEsQ0FBQztJQXFJakcseUJBQUM7Q0FBQSxBQXhJRCxJQXdJQztBQXhJWSxnREFBa0I7QUFvSi9CLGtCQUFlLElBQUksa0JBQWtCLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIExhc3QgdXBkYXRlZCBpbiAyMDIwMDMxNiAqL1xuaW1wb3J0IGFsZXJ0U2VydmljZSBmcm9tICcuLi9hbGVydC1zZXJ2aWNlL2FsZXJ0LXNlcnZpY2UnO1xuXG5leHBvcnQgY2xhc3MgQXBwU2VydmljZVByb3ZpZGVyIHtcbiAgICBwdWJsaWMgc3RhdGljIEJBU0VfRE9NQUlOOiBzdHJpbmcgPSAnaHR0cHM6Ly93d3cueWlsYWJhby5jbi8nO1xuICAgIHB1YmxpYyBzdGF0aWMgQkFTRV9BUEk6IHN0cmluZyA9ICdhcGkvJztcbiAgICBwdWJsaWMgc3RhdGljIEJBU0VfRE9NQUlOX0FQSSA9IEFwcFNlcnZpY2VQcm92aWRlci5CQVNFX0RPTUFJTiArIEFwcFNlcnZpY2VQcm92aWRlci5CQVNFX0FQSTtcblxuICAgIC8vIHB1YmxpYyBoZWFkZXIgPSB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfTtcblxuICAgIHB1YmxpYyBoZWFkZXIgPSB7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyB9O1xuXG4gICAgcHVibGljIGFsZXJ0U2VydmljZSA9IGFsZXJ0U2VydmljZTtcblxuICAgIC8vIGNvbnN0cnVjdG9yKHB1YmxpYyBhbGVydFNlcnZpY2U6IEFsZXJ0U2VydmljZVByb3ZpZGVyKXtcblxuICAgIC8vIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPluW5s+WPsOagh+ivhlxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQYWxmb3JtTnVtYmVyKCk6IG51bWJlciB7XG4gICAgICAgIC8vIHRyeSB7XG4gICAgICAgIC8vICAgICBjb25zdCByZXMgPSB3eC5nZXRTeXN0ZW1JbmZvU3luYygpXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMubW9kZWwpXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMucGl4ZWxSYXRpbylcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHJlcy53aW5kb3dXaWR0aClcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHJlcy53aW5kb3dIZWlnaHQpXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMubGFuZ3VhZ2UpXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMudmVyc2lvbilcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHJlcy5wbGF0Zm9ybSlcbiAgICAgICAgLy8gfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyAgICAgLy8gRG8gc29tZXRoaW5nIHdoZW4gY2F0Y2ggZXJyb3JcbiAgICAgICAgLy8gfVxuICAgICAgICByZXR1cm4gNDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UmVxVXJsKHVybDogc3RyaW5nKSB7XG4gICAgICAgIGlmICh1cmwuaW5kZXhPZignaHR0cDovLycpID09IDAgfHwgdXJsLmluZGV4T2YoJ2h0dHBzOi8vJykgPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQXBwU2VydmljZVByb3ZpZGVyLkJBU0VfRE9NQUlOX0FQSSArIHVybDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDpqozor4HnmbvlvZVcbiAgICAgKi9cbiAgICBwdWJsaWMgY2hlY2tMb2dpbigpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHRva2VuID0gJyc7XG4gICAgICAgIGlmICh0b2tlbiAhPSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bnlKjmiLd0b2tlblxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOi3s+i9rOeZu+W9lVxuICAgICAqL1xuICAgIHB1YmxpYyBnb3RvTG9naW4oKSB7fVxuXG4gICAgLyoqXG4gICAgICog6aG16Z2i6Lez6L2sXG4gICAgICovXG4gICAgcHVibGljIHB1c2godXJsOiBzdHJpbmcsIGpzb246IGFueSA9IHt9KSB7XG4gICAgICAgIHVybCA9IHRoaXMuZ2V0UGFnZVVybCh1cmwsIGpzb24pO1xuICAgICAgICB3eC5uYXZpZ2F0ZVRvKHtcbiAgICAgICAgICAgIHVybDogdXJsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOi3s+i9rHRhYnPpobXpnaJcbiAgICAgKiBAcGFyYW0gdXJsIHRhYnPpobXpnaJcbiAgICAgKi9cbiAgICBwdWJsaWMgcHVzaFRhYnModXJsOiBzdHJpbmcpIHtcbiAgICAgICAgdXJsID0gdGhpcy5nZXRQYWdlVXJsKHVybCk7XG4gICAgICAgIHd4LnN3aXRjaFRhYih7XG4gICAgICAgICAgICB1cmw6IHVybFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDov5Tlm55cbiAgICAgKiBAcGFyYW0gZGVsdGEg6L+U5Zue55qE6aG16Z2i5pWw77yM5aaC5p6cIGRlbHRhIOWkp+S6jueOsOaciemhtemdouaVsO+8jOWImei/lOWbnuWIsOmmlumhteOAglxuICAgICAqL1xuICAgIHB1YmxpYyBwb3AoZGVsdGE6IG51bWJlciA9IDEpIHtcbiAgICAgICAgd3gubmF2aWdhdGVCYWNrKHtcbiAgICAgICAgICAgIGRlbHRhOiBkZWx0YVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXF1ZXN0IHN1Y2Nlc3Mg5Zue6LCDXG4gICAgICovXG4gICAgcHVibGljIHN1Y2Nlc3NIYW5kbGVyKHJlczogYW55LCBjYWxsYmFjazogKHJlc3VsdDogSHR0cENvZGU8YW55PikgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAyMDApIHtcbiAgICAgICAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKHJlcy5kYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3JIYW5kbGVyKHJlcyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiByZXF1ZXN0IGZhaWwg5oiWIHN1Y2Nlc3Pml7YgY29kZSAhPSAyMDAg5pe2IOWbnuiwg1xuICAgICAqL1xuICAgIHB1YmxpYyBlcnJvckhhbmRsZXIocmVzOiBhbnkpOiB2b2lkIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgdGhpcy5hbGVydFNlcnZpY2UuYWxlcnQoJ+e9kee7nOW8gOWwj+W3ricpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRQYWdlVXJsKHVybDogc3RyaW5nLCBqc29uOiBhbnkgPSB7fSkge1xuICAgICAgICBpZiAodXJsLmluZGV4T2YoJy4uLycpID09PSAtMSAmJiB1cmwuaW5kZXhPZignPycpID09PSAtMSkge1xuICAgICAgICAgICAgdXJsID0gJy4uLycgKyB1cmwgKyAnLycgKyB1cmw7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGpzb25LZXlzOiBzdHJpbmdbXSA9IE9iamVjdC5rZXlzKGpzb24pO1xuICAgICAgICBpZiAoanNvbktleXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdXJsO1xuICAgICAgICB9XG4gICAgICAgIC8vanNvbui9rHVybOWPguaVsFxuICAgICAgICBsZXQgdXJsUGFyYW1zID0ganNvbktleXNcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGpzb25ba2V5XSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oJyYnKTtcbiAgICAgICAgaWYgKHVybC5pbmRleE9mKCc/JykgPT09IC0xKSB7XG4gICAgICAgICAgICB1cmwgKz0gJz8nICsgdXJsUGFyYW1zO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdXJsICs9ICcmJyArIHVybFBhcmFtcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cbn1cblxuLyoqXG4gKiDov5Tlm57noIFcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBIdHRwQ29kZTxUPiB7XG4gICAgY29kZTogc3RyaW5nO1xuICAgIG1lc3NhZ2U/OiBzdHJpbmc7XG4gICAgZGF0YT86IFQ7XG4gICAgc3VjY2Vzcz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBBcHBTZXJ2aWNlUHJvdmlkZXIoKTtcbiJdfQ==